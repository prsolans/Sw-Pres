var pagelist = '{' +
    '"pages": [ ' +
    '{ "pageSlug":"", "id": 0, "title": "Presentation Lists", "filename": "index", "layout": "home", "parent":"0", "background":"home2" },' +
    '{ "pageSlug":"introScreen", "id": 1, "title": "Intro Screen", "filename": "index", "layout": "splash", "parent":"0", "background":"home2" },' +
    '{ "pageSlug":"mainMenu", "id": 2, "title": "Main Menu", "filename": "mainMenu", "layout": "menu", "parent":"0", "background":"main-menu" },' +
    '{ "pageSlug":"capabilities", "id": 3, "title": "Capabilities", "filename": "capabilities/index", "layout": "landing", "parent":"0", "background":"main-menu" },' +
    '{ "pageSlug":"products", "id": 4, "title": "Products", "filename": "products/index", "layout": "landing", "parent":"0", "background":"products" },' +
    '{ "pageSlug":"markets", "id": 5, "title": "Markets", "filename": "markets/index", "layout" : "landing", "parent":"0", "background":"markets2", "htmlContent":"<p>Swagelok is a global developer and provider of high-quality and reliable fluid system solutions including products, assemblies and services for the oil and gas, power, petrochemical, alternative fuels, and semiconductor industries. Select a market to learn more about how we can help you develop solutions to your toughest challenges."},' +
    '{ "pageSlug":"mission", "id": 6, "title": "Local Mission and Vision", "filename": "capabilities/detail", "layout": "mission", "parent":"3", "background":"capabilities2", "menu":"ca-mission", "headline":"Helping our Customers Grow", "htmlContent":"<p>Helping you grow means leveraging the core values on which our company was founded and built: Customer Focus, Quality, Integrity, Respect for the Individual, Innovation, And Continuous Improvement. Our values have value, to our associates, our distributors and their associates, our customers, and their customers.</p>"},' +
    '{ "pageSlug":"technicalSupportSales", "id": 7, "title": "Technical Sales Support", "filename": "capabilities/detail", "layout": "text-only", "parent":"3", "background":"capabilities2", "menu":"ca-support" },' +
    '{ "pageSlug":"services", "id": 8, "title": "Services", "filename": "capabilities/detail", "layout": "text-only", "parent":"3", "background":"capabilities2", "menu":"ca-services" },' +
    '{ "pageSlug":"delivery", "id": 9, "title": "Delivery", "filename": "capabilities/detail", "layout": "text-only", "parent":"3", "background":"capabilities2", "menu":"ca-delivery" },' +
    '{ "pageSlug":"training", "id": 10, "title": "Training", "filename": "capabilities/detail", "layout": "text-only", "parent":"3", "background":"capabilities2", "menu":"ca-training" },' +
    '{ "pageSlug":"customSolutions", "id": 11, "title": "Custom Solutions", "filename": "capabilities/detail", "layout": "text-only", "parent":"3", "background":"capabilities2", "menu":"ca-partner" },' +
    '{ "pageSlug":"oneSwagelok", "id": 12, "title": "Your Global Partner", "filename": "capabilities/detail", "layout": "mission", "parent":"3", "background":"capabilities2", "menu":"ca-partner", "headline":"One Swagelok", "htmlContent":"<p>We’ve always been known for our quality products. Recently, in response to growing customer needs, we’ve improved and increased our expertise and range of global services. We now provide customers with local relationships through our distributors and augment them with advanced services and the backing of a global organization. <p>These services relate not only to logistics and coordination among different regions of the world, but also to advanced training and design in systems and processes; expertise in materials science; fabrication of assemblies; and custom product design. <p>As “One Swagelok”&mdash;one interconnected global organization&mdash;we are developing products and services that are intended to lighten the burden of our customers" },' +
    '{ "pageSlug":"applications", "id": 13, "title": "Applications", "filename": "capabilities/slides", "layout": "text-only", "parent":"3", "background":"capabilities2", "menu":"ca-partner" },' +
    '{ "pageSlug":"power", "id": 14, "title": "Power", "filename": "markets/detail","layout": "market", "parent":"5", "background":"power", "menu":"ma-power" },' +
    '{ "pageSlug":"powerDetail", "id": 15, "title": "Power - Detail", "filename": "products/slides", "layout": "market", "parent":"14", "background":"power-blur", "menu":"pr-leak" },' +
    '{ "pageSlug":"oilGas", "id": 16, "title": "Oil &amp; Gas","filename": "markets/detail","layout": "market", "parent":"5", "background":"main-menu", "menu":"ma-oil" },' +
    '{ "pageSlug":"alternativeFuels", "id": 17, "title": "Alternative Fuels","filename": "markets/detail","layout": "market", "parent":"5", "background":"main-menu", "menu":"ma-alternative" },' +
    '{ "pageSlug":"fittings", "id": 18, "title": "Fittings", "filename": "products/detail", "layout":"product", "parent":"4", "background":"products", "menu":"pr-fittings", "headline":"High-Performance Fittings &amp; Adapters", "htmlContent":"<p>When the world’s most respected companies want to make lasting connections, they turn to Swagelok. From high-purity fittings designed to minimize particle generation and entrapment to high-strength fittings engineered to hold high pressure, Swagelok products deliver dependable, leak-free performance. <p>For more than 65 years, we’ve been solving tough challenges in the oil and gas, chemical processing, power generation, alternative energy, aerospace, and defense industries, establishing a reputation for high quality and high performance. <p>Whether you need fittings for corrosive environments or extreme temperatures, fittings to maintain vacuum or withstand high pressure, or a proven partner who understands your industry&mdash;you’ll be well connected with Swagelok." },' +
    '{ "pageSlug":"", "id": 19, "title": "Fittings", "filename": "products/detail", "layout":"product", "parent":"18", "background":"fi-fittings", "menu":"pr-fittings", "headline":"Tube Fittings and Tube Adapters", "htmlContent":"<p>Swagelok tube fittings and adapters are easy to install and can be disassembled and reassembled many times while retaining their leak-tight seal. Subjected to burn tests, shock impact tests, external pressure tests, finite element analysis, and more, our tube fittings perform beyond all expectations. <p>Available in a variety of materials and configurations, Swagelok tube fittings and adapters deliver robust tube grip, vibration resistance, and leak-free performance. These attributes are critical to the oil and gas, power, chemical and refining, alternative fuels, and semiconductor industries. Our selection of tube fittings and adapters includes: <ul> <li>Elbows</li> <li>Caps and Plugs</li> <li>Chromatograph and Column End</li> <li>Straights </li> <li>Tees</li> <li>Union Crosses</li> <li>High Pressure</li> <li>Medium Pressure</li> <li>Accessories</li> </ul>"},' +
    '{ "pageSlug":"", "id": 20, "title": "Fittings", "filename": "products/detail", "layout":"product", "parent":"18", "background":"fi-biopharm", "menu":"pr-fittings", "headline":"Biopharmaceutical Fittings & Adapters", "htmlContent":"<p>Swagelok’s biopharmaceutical fittings and adapters are engineered to solve purity problems inherent in conventional sanitary clamp fittings. Through enhanced drainability and cleanability as well as the virtual elimination of gasket extrusion and fluid holdup, our fittings and adapters limit entrapment areas that can harbor bacteria. <p>Ideal for sanitary processing applications, Swagelok biopharmaceutical products meet ASME-BPE and 3-A sanitary standards. Our selection includes: <ul> <li>TS Series Sanitary Clamps</li> <li>TS Series Sanitary Clamp Caps</li> <li>TS Series Sanitary Clamp Ferrules</li> </ul>"},' +
    '{ "pageSlug":"", "id": 21, "title": "Fittings", "filename": "products/detail", "layout":"product", "parent":"18", "background":"fi-dielectric", "menu":"pr-fittings", "headline":"Dielectric Fittings & Adapters", "htmlContent":"<p>Engineered to isolate monitoring instruments from the effects of electrical currents, dielectric fittings work to interrupt cathodic current flow while allowing full fluid flow. These fittings feature molded thermoplastic insulation with excellent electrical, chemical, and ultraviolet resistance as well as low water absorption. This helps maintain dielectric strength and integrity over a wide range of operating conditions. <p>Gaugeable tube fittings and tapered pipe thread end connections provide direct connections to tubing or piping systems. Our selection includes: <ul> <li>Tube Fitting, Dielectric Union, 12 mm Tube OD</li> <li>Tube Fitting, Dielectric Union, 3/8 in. Tube OD x 1/4 in. Male NPT</li> <li>Tube Fitting, Dielectric Union, 1/4 in. Tube OD</li> <li>Tube Fitting, Dielectric Male Connector, 3/8 in. Tube OD x 1/4 in. Male NPT</li> <li>Tube Fitting, Dielectric Union, 1/2 in. Tube OD </li> <li>Tube Fitting, Dielectric Union, 3/8 in. Tube OD</li> </ul>"},' +
    '{ "pageSlug":"", "id": 22, "title": "Fittings", "filename": "products/detail", "layout":"product", "parent":"18", "background":"fi-flange", "menu":"pr-fittings", "headline":"Flange to Swagelok Tube Fitting Pipe", "htmlContent":"<p>Flange adapters from Swagelok offer a threadless, weldless transition from flanged piping systems to tubing systems, with options designed to meet ASME, DIN, EN, and JIS standards. With a one-piece integrally machined forged body, flange adapters are available with Swagelok tube fitting end connections up to 50 mm and 2 inches. Choose from a range of sizes, pressure classes, and seal faces including flat face, raised face, RTJ, and tongue-and-groove. Our selection includes: <ul> <li>ANSI Flanges</li> <li>DIN Flanges</li> <li>Lap Joint Flanges</li> </ul>"},' +
    '{ "pageSlug":"", "id": 23, "title": "Fittings", "filename": "products/detail", "layout":"product", "parent":"18", "background":"fi-pipe-fittings", "menu":"pr-fittings", "headline":"Pipe Fittings & Adapters", "htmlContent":"<p>Swagelok pipe fittings are precision manufactured for optimal sealing, minimal galling, and consistently tight-fitting installations. Featuring burr-free surfaces and smooth thread flanks, Swagelok pipe fittings and adapters are available in stainless steel, carbon steel, and brass. They range from 1/16- to 1-inch sizes to meet the demands of a wide variety of applications. Our selection includes: <ul> <li>Pipe Adapters</li> <li>Pipe Caps and Plugs</li> <li>Pipe Couplings</li> <li>Pipe Crosses</li> <li>Pipe Elbows</li> <li>Pipe Nipples</li> <li>Pipe Reducers</li> <li>Pipe Tees</li> </ul>"},' +
    '{ "pageSlug":"", "id": 24, "title": "Fittings", "filename": "products/detail", "layout":"product", "parent":"18", "background":"fi-vacuum", "menu":"pr-fittings", "headline":"Vacuum Fittings & Adapters", "htmlContent":"<p>Swagelok vacuum fittings and adapters are engineered to deliver a reliable, repeatable seal that vacuum systems depend on to function properly in operations such as manufacturing, packaging, material handling, and assembly. Easy to install, high-quality Swagelok fittings and adapters are made of stainless steel with fluorocarbon FKM O-rings to offer an array of high-performance solutions for vacuum systems. <ul> <li>Ultra-Torr Straights</li> <li>Ultra-Torr Tees</li> <li>Spare Parts and Accessories</li> </ul>"},' +
    '{ "pageSlug":"", "id": 25, "title": "Fittings", "filename": "products/detail", "layout":"product", "parent":"18", "background":"fi-vco-o-ring", "menu":"pr-fittings", "headline":"VCO&reg; O-Ring Face Seal Fittings", "htmlContent":"<p>Designed for rapid assembly in pipe, tube, and welded systems, VCO&reg; O-ring face seal fittings from Swagelok offer high-integrity seals using a captive O-ring in the body component. Swagelok’s innovative fitting design is easy to install&mdash;even in limited spaces&mdash;with no axial clearance required. Featuring two ports for easy leak testing, VCO O-ring face seal fittings are ideal for everything from general industry to high-pressure, high-purity, and critical vacuum applications within a wide range of temperatures. Options include: <ul> <li>VCO&reg; O-Ring Bodies Elbow 90°</li> <li>VCO&reg; O-Ring Bodies Straight</li> <li>VCO&reg; O-Ring Bodies Tee Union</li> <li>VCO&reg; O-Ring Glands</li> <li>VCO&reg; O-Ring Nuts, Caps and Plugs</li> <li>Spare Parts and Accessories</li> </ul>"},' +
    '{ "pageSlug":"", "id": 26, "title": "Fittings", "filename": "products/detail", "layout":"product", "parent":"18", "background":"fi-vcr-metal", "menu":"pr-fittings", "headline":"VCR&reg; Metal Gasket Face Seal & VCR Split-Nut Assemblies", "htmlContent":"<p>As the authentic VCR&reg; brand, Swagelok VCR metal gasket face seal and split-nut assemblies are the first of their kind and on the forefront of high-performance solutions to today’s high-purity challenges. Made of high-purity stainless steel with a precision manufactured gasket, our fittings offer a metal-to-metal seal that ensures leak-tight service for critical vacuum or positive pressure systems. <p>For highly engineered solutions that minimize entrapment areas, insist on original Swagelok VCR products. Our selection includes: <ul> <li>VCR&reg; Metal Gasket Bodies Cross Union</li> <li>VCR&reg; Metal Gasket Bodies Elbow 90°</li> <li>VCR&reg; Metal Gasket Bodies Straight </li> <li>VCR&reg; Metal Gasket Bodies Tee</li> <li>VCR&reg; Metal Gasket Gaskets</li> <li>VCR&reg; Metal Gasket Glands  </li> <li>VCR&reg; Metal Gasket Nuts, Caps, and Plugs  </li> <li>VCR&reg; Metal Gasket Welded Assemblies, Elbow, 90°  </li> <li>VCR&reg; Metal Gasket Welded Assemblies Straight</li> <li>VCR&reg; Metal Gasket Welded Assemblies Tee</li> <li>Spare Parts and Accessories</li> </ul>"},' +
    '{ "pageSlug":"", "id": 27, "title": "Fittings", "filename": "products/detail", "layout":"product", "parent":"18", "background":"fi-weld", "menu":"pr-fittings", "headline":"Weld Fittings & Adapters", "htmlContent":"<p>Ultrahigh-purity, specially cleaned, and industrial weld fittings from Swagelok are engineered to make permanent, high-integrity connections. Made from a special grade of SAF 2507™ super duplex material, our weld fittings and adapters offer excellent corrosion resistance in chloride-containing environments. <p>From general industrial to ultrahigh-purity applications, count on high-integrity connections that last with weld fittings from Swagelok, available in a variety of materials, sizes, and shapes. Options include: <ul> <li>Micro-Fit&reg; High-Purity Tube Butt Weld Fittings</li> <li>Pipe Socket Weld Fittings</li> <li>Tube Butt Weld Automatic Fittings</li> <li>Tube Butt Weld Fittings</li> <li>Tube Socket Weld Automatic Fittings</li> <li>Tube Socket Weld Fittings</li> <li>Weld Adapter Fittings</li> </ul>"},' +
    '{ "pageSlug":"", "id": 28, "title": "Fittings", "filename": "products/detail", "layout":"product", "parent":"18", "background":"fi-bco", "menu":"pr-fittings", "headline":"BType VCO&reg; L-Ring Face Seal Fittings", "htmlContent":"<p>Inspired by challenges in the pharmaceutical and biotechnology industries, VCO&reg; fittings from Swagelok feature an “L” ring instead of an “O” ring to reduce internal entrapment that can harbor bacteria. Offering enhanced cleanability and drainability, Btype VCO fittings are ideal for steam cleaning, research and development, sampling, or process feed lines as well as any other application that requires frequent assembly and disassembly. Options include: <ul> <li>VCO&reg; Bodies</li> <li>VCO&reg; Nuts</li> <li>VCO&reg; Glands</li> <li>Spare Parts and Accessories</li> </ul>"},' +
    '{ "pageSlug":"", "id": 29, "title": "Fittings", "filename": "products/detail", "layout":"product", "parent":"18", "background":"fi-fittings", "menu":"pr-fittings", "headline":"TS Fittings", "htmlContent":"<p>TS Series biopharmaceutical fittings feature controlled gasket compression to virtually eliminate fluid holdup in conventional sanitary clamp fittings. Designed to meet ASME-BPE and 3-A sanitary standards, patented TS fittings feature boreline seals and metal-to-metal stops to improve drainability and cleanability. Leak-free performance throughout a range of pressure-temperature ratings makes TS fittings ideal wherever product purity and integrity are critical. Available in sizes from 1/2 to 4 inches, our selection includes: <ul> <li>TS Fittings</li></ul>"},' +
    '{ "pageSlug":"", "id": 30, "title": "Valves", "filename": "products/detail", "layout": "product", "parent":"4", "background":"main-menu", "menu":"pr-valves" },' +
    '{ "pageSlug":"", "id": 31, "title": "Filters", "filename": "products/detail", "layout": "product", "parent":"4", "background":"main-menu", "menu":"pr-filters" },' +
    '{ "pageSlug":"", "id": 32, "title": "Hoses and Flexible Tubing", "filename": "products/detail", "layout": "product", "parent":"4", "background":"main-menu", "menu":"pr-hoses" },' +
    '{ "pageSlug":"", "id": 33, "title": "Leak Detectors, Lubricants and Sealers", "filename": "products/detail", "layout": "product", "parent":"4", "background":"main-menu", "menu":"pr-leak" },' +
    '{ "pageSlug":"", "id": 34, "title": "Measurement Devices", "filename": "products/detail", "layout": "product", "parent":"4", "background":"main-menu", "menu":"pr-measure" },' +
    '{ "pageSlug":"", "id": 35, "title": "Case Study", "filename": "casestudy/slides", "layout": "text-only", "parent":"0", "background":"case-study" },' +
    '{ "pageSlug":"businessModel", "id": 36, "title": "Expanding to make the world smaller.", "filename": "capabilities/detail", "layout": "text-video", "parent":"12", "background":"capabilities2", "htmlContent":"<p>We continue to refine our unique business model that puts local inventory close to the customer in regions throughout the world. We establish distributors as independent businesses, staffed with local people who are focused only on Swagelok products and building trust with customers. </p> <p>This model is our cornerstone and it sets us apart. </p> <p>Our distributors are closely connected with Swagelok and with each other. Anywhere in the world, you can get the same top-flight service from Swagelok. But if you design and specify in one location and your job site is another, distributors in both locations will work with you as one team. </p> <p>We are one interconnected global organization – “One Swagelok.” </p>" },' +
    '{ "pageSlug":"marketsCustomers", "id": 37, "title": "More than parts&mdash;partnerships.", "filename": "capabilities/detail", "layout": "text-video", "parent":"12", "background":"capabilities2", "htmlContent":"<p>Our customers need more than a components supplier. They need our help across their operations. <p>Our technical experts work directly with the customer to see problems and challenges firsthand and anticipate what customer needs will be next year – or in three to five years. We aim to be ready with the right products, support, and applications knowledge. <p>Our materials science group works tirelessly to understand process and environmental conditions in oil fields. In the lab our engineers test new technologies for natural gas vehicles, semiconductor tools, and more. <p>We conduct research with national laboratories and serve on standards committees because it is our mission to know and to be ready on behalf of our customers." },' +
    '{ "pageSlug":"engineering", "id": 38, "title": "In pursuit of answers.", "filename": "capabilities/detail", "layout": "text-video", "parent":"12", "background":"capabilities2", "htmlContent":"<p>We’re a practical company. For us, innovation starts with a customer’s problem. </p> <p>Our engineers are motivated by in-person interactions with the customer. Understanding the issues. Talking them over. Weighing options. A customer challenge is what we rally around. </p> <p>At the same time, we’re focused on safety. It’s our job to protect our customers and their applications. All Swagelok engineers know this. Every day, it’s on their mind. </p> <p>We’re not a public company under pressure for short-term results. We’re focused on doing the right thing. </p> <p>When a new product hits the market, it must be bulletproof. </p>" },' +
    '{ "pageSlug":"shopFloorCulture", "id": 39, "title": "In the right hands.", "filename": "capabilities/detail", "layout": "text-video", "parent":"12", "background":"capabilities2", "htmlContent":"<p>Anyone who spends any time in a Swagelok manufacturing facility comes away with a sense that here is something exceptional – cleanliness, orderliness, complete adherence to a set of quality and safety practices. </p> <p>On the Swagelok shop floor there are absolutes, and we believe that any deviation could have dire consequences for us and our customers. We achieve this through training, practice, policy, and most importantly culture. </p> <p>Swagelok associates are part owners, and share in the company’s success. </p> <p>Their ideas are heard, they recommend improvements, report things that seem just a little out of the ordinary and serve as the guardians of safety. </p> <p>That’s why Swagelok has experiences double-digit decreases in reported injury cases year after year and we’re now in the top quartile of our industry category. </p>" },' +
    '{ "pageSlug":"quality", "id": 40, "title": "Zero Customer Disappointments", "filename": "capabilities/detail", "layout": "text-video", "parent":"12", "background":"capabilities2", "htmlContent":"<p>There is a phrase that every Swagelok executive, engineer and shop floor associate knows – Zero Customer Disappointments. It is a way of life. </p> <p>We strive to ensure the customer has a perfect experience with every product and service, every time and that they deliver on the promise of safety and total peace of mind.</p> <p>That’s the standard we hold ourselves to. </p> <p>We’re at the point where “zero” is really possible, and we’re on a mission to make it happen.</p>" },' +
    '{ "pageSlug":"manufacturing", "id": 41, "title": "Nonstop operation.", "filename": "capabilities/detail", "layout": "text-video", "parent":"12", "background":"capabilities2", "htmlContent":"<p>We own the product manufacturing process from start to finish. This way we can control the maximum number of variables, ensuring product quality. </p> <p>We make some of our own cutting tools and we’re very deliberate about the machines we buy. Then, we are disciplined about routine service. And we run a predictive maintenance program that addresses repairs before there is a breakdown. </p> <p>Our machines must be in the very best operating condition, executing at the tightest tolerances. </p> <p>What is our motivation for such exactitude? It’s product quality. It’s zero customer disappointments. And it’s the safety of our machine operators.</p>" },' +
    '{ "pageSlug":"globalSourcing", "id": 42, "title": "Suppliers we can count on.", "filename": "capabilities/detail", "layout": "text-video", "parent":"12", "background":"capabilities2", "htmlContent":"<p>Swagelok comes through to customers again and again partly due to the quality of our supply base. </p> <p>We look long and hard to find our suppliers and apply enormous amounts of scrutiny. We’re looking not just at the product and quality systems, but also their values and quality of leadership.</p> <p>With so much riding on our suppliers, we ask them to take extraordinary measures – in some cases, to keep their proprietary secrets in escrow – in others, to keep extra inventory on hand.</p> <p>We do everything we can to mitigate risk. That’s our promise to customers.</p>" },' +
    '{ "pageSlug":"financialStewardship", "id": 43, "title": "A mission with momentum.", "filename": "capabilities/detail", "layout": "mission", "parent":"12", "background":"capabilities2", "htmlContent":"<p>With the close of 2014, Swagelok achieved its fourth consecutive year of record growth, with an average yearly growth rate of 7% since 2003. <p>We attribute this growth to our values-based approach to fiscal management – doing the right thing for the long term. Our mission is to serve our customers – not only this year, but for many years to come. <p>We are a privately held company and not under pressure to adjust our investments based on economic cycles or demands for short-term profits. Through good economic times and bad, we remain committed to four main areas: our associates; our properties and equipment; our technologies; and our products and services." },' +
    '{ "pageSlug":"associates", "id": 44, "title": "One team of thousands.", "filename": "capabilities/detail", "layout": "text-video", "parent":"12", "background":"capabilities2", "htmlContent":"<p>We strive for nothing less than an exceptional customer experience. And so much of that depends on our people&mdash;our distributors, corporate leaders, and associates worldwide. </p> <p>These are rare individuals with a passion for service. They are on a mission, going to extraordinary lengths with the customer in mind.</p> <p>For the majority of our customers, their most direct experience is through our distributors. They are backed by cross-functional teams in engineering, sales and fulfillment&mdash;about 3,600 distributor associates at 225 stocking locations in 70 countries. </p> <p>We’re one interconnected global organization&mdash;“One Swagelok”&mdash;engineered to perform for you, our valued customer.</p>" },' +
    '{ "pageSlug":"socialResponsibility", "id": 45, "title": "Engineering a better world.", "filename": "capabilities/detail", "layout": "text-only", "parent":"12", "background":"capabilities2", "htmlContent":"<p>As a values-driven company, we are looking out not just for our own associates and customers, but also for the environment and the communities in which we live and work. </p> <p>We divert 60% of the waste that would otherwise go to landfills, including items such as paper, cardboard and scrap wood. We are capture up to 120 tons of food compost each year. </p> <p>To reduce energy consumption, we recently replaced roofs over our manufacturing plants, upgraded HVAC systems and compressors, and installed LED lighting in our parking lots.</p> <p>Our manufacturing processes produce a lot of metal cuttings mixed with oil, but we spin off the oil and use it in a second application. Then, we recycle the metal cuttings. Wherever possible, we try to use precious resources twice. </p> <p>At Swagelok, we are on a mission to make the world a better place and we’re safeguarding the environment. </p> <p>We also donate as much as $3.5 million each year to more than 100 local charities each year and have associates serving on more than 70 local nonprofit boards.  </p>" }' +
    ']}';

var idleTime = 0;
var videoWasOpenedAtPageLoad = false;

PAGE_ID = getCookie('PAGE_ID');

if (window.location.protocol == "http:") {

    if (typeof PAGE_ID == 'undefined' || PAGE_ID == '1' || PAGE_ID == '' || window.location.pathname == '/presentation/') {

        PAGE_ID = 1;
        setCookie('PAGE_ID', PAGE_ID);

        PRESENTATION_ID = getCookie('PRESENTATION_ID');

        if (typeof getParameterByName('p') != 'undefined' && getParameterByName('p') != '') {
            PRESENTATION_ID = getParameterByName('p');
            setCookie('PRESENTATION_ID', PRESENTATION_ID);
        }
    }

    PRESENTATION_ID = getCookie('PRESENTATION_ID');

    if (PRESENTATION_ID) {
        $.getScript('/presentation/_Content/' + PRESENTATION_ID + '/settings.js');
    }
}

if (window.location.protocol == "file:") {
    var pathname = window.location.pathname.split('/presentation/');

    if (typeof PAGE_ID == 'undefined' || PAGE_ID == '1' || PAGE_ID == '' || pathname[1] == '/presentation/') {

        PAGE_ID = 1;
        setCookie('PAGE_ID', PAGE_ID);

        PRESENTATION_ID = sessionStorage.getItem('PRESENTATION_ID');

        if (typeof getParameterByName('p') != 'undefined' && getParameterByName('p') != '') {
            PRESENTATION_ID = getParameterByName('p');
            setCookie('PRESENTATION_ID', PRESENTATION_ID);
        }
    }

    DOMAIN = pathname[0];

    PRESENTATION_ID = sessionStorage.getItem('PRESENTATION_ID');
    PAGE_ID = sessionStorage.getItem('PAGE_ID');

    if (PRESENTATION_ID) {
        $.getScript(DOMAIN + '/presentation/_Content/' + PRESENTATION_ID + '/settings.js');
    }
}


//$(document).delegate("body", "touchmove", false);
$(document).delegate("body", "scrollstart", false);

$(document).on("pagebeforecreate", function pagePrebuild() {

    $('#page-container').css('display', 'none');

    $.ajaxPrefilter(function (options) {
        options.crossDomain = true;
    });
    $.ajaxSetup({async: false});

    get_child_pages('4'); // Products
    get_child_pages('3'); // Capabilities

    var filepath = $('link').first().attr('href');
    var path = filepath.split("Content/");
    var fileDepth = path[0];

    load_page_elements(fileDepth);

    var pageDetails = getObjects(JSON.parse(pagelist), 'id', PAGE_ID);

    //load_page_info(PAGE_ID);

    if (typeof(Storage) !== "undefined") {
        // Code for localStorage/sessionStorage.
        localStorage.setItem('PAGE_ID', PAGE_ID);
        localStorage.setItem('pageSlug', pageDetails[0].pageSlug);
        localStorage.setItem('pageLayout', pageDetails[0].layout);
        localStorage.setItem('hasCaseStudy', false);

    } else {
        // Sorry! No Web Storage support..
        alert('Sorry! No Web Storage support...');
    }

});

$(document).ready(function pageReady() {

    //start_inactivity_timer();

    $('body').removeClass('ui-overlay-a');
    $('div').removeClass('ui-page-theme-a');

    var panelmenu = $('#sectionMenu');

    panelmenu.on('panelbeforeopen', function () {
        $('#section-menu-button').hide();
    });

    panelmenu.on('panelclose', function () {
        $('#section-menu-button').show();
    });

    $('#page-container').css('height', $(window).height());

    var touchArea = document.querySelector("body");

    var mc = new Hammer(touchArea, {preventDefault: false});
    mc.on("swipe pan panstart panend pancancel",
        touchInteractionHandler);

    function touchInteractionHandler(ev) {
        if (ev.type == 'panend' && ev.distance > 350 && ev.center.x < 5) {
            try {
                Mt.App.fireEvent('leavePresentation', {});
            } catch (e) {
                alert(e.message + ' ' + e.stack);
            }
        }
    }

    $('#page-container').show();

});

/**
 * Checks the presentation specific settings and displays links to all markets that have been setup to appear within this presentation
 * Utilized for main menu page, section landing page, and bottom nav within the section
 */
function get_available_markets() {
    var livemarkets = JSON.parse(marketList);

    var thisPage = getObjects(JSON.parse(pagelist), 'pageSlug', localStorage.getItem('pageSlug'));

    if (thisPage[0].pageSlug == 'mainMenu' || thisPage[0].pageSlug == 'markets' || thisPage[0].parent == '5') {
        $.each(livemarkets, function () {
            var obj = getObjects(JSON.parse(pagelist), 'title', this.title);
            var html = '<div class="col-sm-2 landing-menu-item"><a href="/presentation/' + obj[0].filename + '.html" onclick="setCookie(\'PAGE_ID\', ' + obj[0].id + ')" data-ajax="false"><img src="' + fileDepth + 'Content/images/menu/' + obj[0].menu + '.png"/><br/> ' + this.title + '</a></div>';
            $('.item-menu').append(html);
        });
    }
}

function get_custom_content(layouts, content) {


    var thisPage = localStorage.getItem('pageSlug');
    var thisLayout = get_page_layout(layouts, thisPage);

    if (thisLayout != false) {
        set_page_layout(thisLayout);
    }

    var thisContent = getObjects(JSON.parse(content), 'page_id', thisPage);

    $.each(thisContent, function () {

        if (typeof this !== "undefined") {

            var elementId = this.page_element;

            if (this.html != undefined) {
                var html = this.html;
                $('#' + elementId).html(html);
            }

            if (this.src != undefined) {
                var src = this.src;
                $('#' + elementId).attr('src', src);
            }
        }
    });

    load_page_info(localStorage.getItem('PAGE_ID'));

    if (thisLayout == 'market') {
        show_market_slides();
    }

}
/**
 * Get child pages for Capabilities and Products sections, and display links to the pages
 * Utilized for main menu page, section landing page, and bottom nav within the section
 * @param section
 */
function get_child_pages(section) {

    var thisPage = get_page_details(PAGE_ID);

    var thisParent = get_page_details(thisPage.parent);

    var select = JSON.parse(pagelist);
    var items = select.pages;
    var fileDepth = get_file_location();

    $.each(items, function () {

        if (this.parent == section) {

            var parent = get_page_details(section);
            var title = parent.title.toLowerCase();

            var html = '<li class="col-sm-2 landing-menu-item"><a href="/presentation/' + this.filename + '.html" onclick="setCookie(\'PAGE_ID\', ' + this.id + ')" data-ajax="false"><img src="' + fileDepth + 'Content/images/menu/' + this.menu + '.png"/><br/>' + this.title + '</a></div>';
            var element = title + '-child-pages-list';
            var listClass = title + '-bottom-menu-list';
            $("." + element).append(html);
            if (thisParent.id == section || thisParent.parent == section) {
                var li = '<li class="' + listClass + '"><a href="/presentation/' + this.filename + '.html" onclick="setCookie(\'PAGE_ID\', ' + this.id + ')" data-ajax="false"><img src="' + fileDepth + 'Content/images/menu/' + this.menu + '.png"/><br/>' + this.title + '</a></li>';
                $('.slidee').append(li);

                var viewport = $(window).width();
                var width = viewport / 6;
                $('.slidee li').css('width', width);
            }
        }
    });


    if (thisPage.pageSlug == 'mainMenu') {

        var width = $(window).width();
        var liWidth = (width * (5 / 6)) / 6.25;
        $('.slidee li').css('width', liWidth);
        $('.frame').css('height', '175px');
        $('.landing-menu-item:nth-child(7n+7)').css('clear', 'none');
    }
}

/**
 * Get the ID of the current page container
 * @returns int;
 */
function get_container_id() {

    return $('#page-container').data('pageid');
}

/**
 * Checks page header to determine the depth of the current page within the file structure
 * @returns {*}
 */
function get_file_location() {
    var filepath = $('link').first().attr('href');

    var path = filepath.split("Content/");

    return path[0];
}

/**
 * Given the current page container ID, checks the JSON containing generic page information and returns array of information relative to the existing page
 * Information includes: Page title, page parent, page layout, template filename, background image, navigation menu image
 * @param id
 * @returns {*}
 */
function get_page_details(id) {

    var select = JSON.parse(pagelist);

    return select.pages[id];
}

function get_page_layout(layouts) {

    var thisLayout = getObjects(JSON.parse(layouts), 'page_id', localStorage.getItem('pageSlug'));

    var page_layout = false;
    if (typeof thisLayout[0] !== "undefined") {
        page_layout = thisLayout[0].page_layout;
        localStorage.setItem('pageLayout', page_layout);
    }
    else {
        page_layout = localStorage.getItem('pageLayout');
    }

    return page_layout;
}

function get_presentation_settings() {
    if (settings) {
        var presSettings = JSON.parse(settings);

        if (presSettings[0].hasCaseStudy == true) {
            localStorage.setItem('hasCaseStudy', true);

        }
    }
    else {
        console.log('ERROR: Presentations settings JSON feed');
    }
    $.each(presSettings, function () {
        $('#header-title').html(this.division);

        $('#client-logo').attr('src', this.assetDir + 'images/logo.png');
        if (localStorage.getItem('hasCaseStudy') == 'true') {
            $('#case-study-link').attr('onclick', 'setCookie("PAGE_ID", "13")');
            $('#case-study-link').attr('href', 'capabilities/slides.html');
        }
    });

    return presSettings;
}

function get_video_details(videoList) {
    var livevideos = JSON.parse(videoList);

    var pickVideo = false;

    if (localStorage.getItem('pageLayout') == 'text-video') {
        pickVideo = localStorage.getItem('pageSlug') + '-video';
    }
    else if (localStorage.getItem('pageLayout') == 'mission') {
        pickVideo = 'mission';
    }

    $.each(livevideos, function () {

        if (pickVideo == 'mission') {
            if (this.page_element != 'ceo-video' && this.page_element != 'distributor-video') {
                return true;
            }
        }
        else if (pickVideo != false) {
            if (pickVideo != this.page_element) {
                return true;
            }
        }

        var posterImage = this.posterfile;
        var video = this.videofile;
        var subtitles = this.subtitlefile;
        var element = this.page_element;
        var videoCaption = this.caption;


        $('#' + element + '-poster').attr('src', posterImage);
        $('#' + element + '-caption').html(videoCaption);

        var html = '<video id="' + element + '" class="video-js vjs-default-skin" controls preload="auto" data-setup=""><source id="' + element + '-mp4-path" src="" type="video/mp4" /><!--<track kind="subtitles" src="' + subtitles + '" srclang="en" label="English" default data-ajax="false">--><p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p></video>';

        $('.' + element + '-modal-body').html(html);

        $('.' + element + '-video-js').data("setup", {
            "bigPlayButton": true,
            "controlBar": false,
            "type": "video/mp4",
            "src": video
        });

        $('#' + element + '-mp4-path').attr('src', video);

        videojs(element).ready(function () {

            // Store the video object
            var myPlayer = this, id = myPlayer.id();

            // Make up an aspect ratio
            var aspectRatio = 9 / 16;

            function resizeVideoJS() {
                var width = document.getElementById(id).parentElement.offsetWidth;
                myPlayer.width(width).height(width * aspectRatio);
            }

            var videoModal = $("#" + element + "-modal");

            videoModal.on('show.bs.modal', function () {

                var width = $(window).width();
                myPlayer.width(width).height($(window).height());

                $('.modal-dialog').css('margin', '0 !important');

                myPlayer.play();

                $(window).resize(function () {
                    resizeVideoJS();
                });

                $('#' + element + '_html5_api').on('click', function () {
                    videoModal.modal('hide');
                    show_animated_overlay();
                });

                $('#' + element + '_html5_api').on('tap', function () {
                    videoModal.modal('hide');
                    show_animated_overlay();
                });

            });

            videoModal.on('hidden.bs.modal', function () {
                myPlayer.pause();
            });

        });

    });
}

function load_page_elements(fileDepth) {
    var pageID = getParameterByName('pageId');

    var menuDepth;

    if (fileDepth == "../../") {
        menuDepth = "../";
    }
    else {
        menuDepth = "";
    }

    var sidebarMenuHTML = '<ul><li class="capabilities-panel-item"><a href="/presentation/capabilities/index.html" onclick="setCookie(\'PAGE_ID\', 3);" data-ajax="false" class="panel-link-item">Capabilities</a></li><li class="products-panel-item"><a href="/presentation/products/index.html" onclick="setCookie(\'PAGE_ID\', 4)" data-ajax="false" class="panel-link-item">Products</a></li><li class="markets-panel-item"><a href="/presentation/markets/index.html" onclick="setCookie(\'PAGE_ID\', 5)" data-ajax="false" class="panel-link-item">Markets</a></li></ul>';
    $('#sectionMenu').html(sidebarMenuHTML);

    var headerRow = '<div id="header-left"><a href="/presentation/" onclick="setCookie(\'PAGE_ID\', 1)" style="background: none !important; border: none !important" data-ajax="false"><img src="' + fileDepth + 'Content/images/swagelok-logo.jpg" id="header-logo"><h1 id="header-title"></h1></a><span id="submenu"></span></div><a href="#sectionMenu" id="section-menu-button" class="ui-btn-right"><img src="' + fileDepth + 'Content/images/icons-png/bars-white.png" height="23"/></a>';

    $("#header-row").html(headerRow);

    if (pageID == 1) {
        $('#view-content-link').attr('href', 'mainMenu.html?pageId=2');
    }

}

/**
 * Using the page ID, gather and display page layout and HTML content
 * @param id
 * @param fileDepth
 */
function load_page_info(id) {

    var parent;
    var background;

    var title;
    var headline;
    var content;

    var page = get_page_details(localStorage.getItem('PAGE_ID'));

    parent = page.parent;
    background = page.background;

    title = page.title;
    content = page.htmlContent;
    headline = page.headline;
    layout = page.layout;

    // Display page information
    $('#page-container').attr('data-pageid', id);
    $('body').css('background', 'url(/presentation/_Content/images/backgrounds/' + background + '.jpg)');
    $('body').css('background-size', 'cover').css('background-repeat', 'no-repeat');

    if (headline == undefined) {
        $('#page-title').html(title);
    }
    else {
        $('#page-title').html(headline);
    }

    if (content != undefined) {
        if (layout == 'text-video') {
            $('#left-custom-content').html(content);
        }
        if (layout == 'text-only') {
            $('#left-custom-content').html(content);
            $('#right-custom-content').html('');
        }
        else if (layout == 'mission' || layout == 'product' || layout == 'landing') {
            $('#page-content').append(content);
        }
    }
    else {
        $('#page-content').html(content);
    }

    if (parent != '0') {

        var thisParent = get_page_details(parent);
        var thisParentsParent = get_page_details(thisParent.parent);

        var submenu = '<br/><span><a href="/presentation/' + thisParent.title.toLowerCase() + '/index.html" onclick="setCookie(\'PAGE_ID\', ' + thisParent.id + ')" data-ajax="false">&lt; ' + thisParent.title + '</a></span>';

        if (thisParentsParent.id == '5') { // Parent is Markets homepage
            submenu = '<br/><span><a href="/presentation/' + thisParentsParent.title.toLowerCase() + '/detail.html" onclick="setCookie(\'PAGE_ID\', ' + thisParent.id + ')" data-ajax="false">&lt; ' + thisParent.title + '</a></span>';
        }

        if (thisParentsParent.id == '4') { // Parent is Products homepage
            submenu = '<br/><span><a href="/presentation/' + thisParentsParent.title.toLowerCase() + '/index.html" onclick="setCookie(\'PAGE_ID\', ' + thisParentsParent.id + ')" data-ajax="false">&lt; ' + thisParentsParent.title + '</a></span>';
        }

        if (thisParent.id == '12') { // Parent is One Swagelok homepage
            submenu = '<br/><span><a href="/presentation/' + thisParentsParent.title.toLowerCase() + '/index.html" onclick="setCookie(\'PAGE_ID\', ' + thisParentsParent.id + ')" data-ajax="false">&lt; ' + thisParentsParent.title + '</a></span>';
        }

        $("#submenu").html(submenu);

        if (thisParent.id == '4' || thisParentsParent.id == '4') { // Parent or Grandparent is in Products category
            var html = ' | <a href="" id="show-menu">' + title + '</a>';
            $('#submenu').append(html);
            show_submenu(id);
        }

        if (thisParent.id == '12' || page.id == '12') { // Parent is One Swagelok page
            var displayTitle = page.title;
            if (thisParent.id == '12') {
                displayTitle = thisParent.title;
            }
            var html = ' | <a href="" id="show-menu">' + displayTitle + '</a>';
            $('#submenu').append(html);
            show_submenu(id);
        }

    }

}

function set_page_layout(pageLayout) {

    // Set page layout
    $('#section-menu-button').show();
    $('#view-content-button').hide();
    // Home will be replaced by app functionality
    if (pageLayout == 'home') {
        get_available_presentations();
        $('#section-menu-button').hide();
        $('#view-content-button').show();
    }
    if (pageLayout == 'splash') {
        show_animated_overlay();

        //resize band based on page height
        var pageHeight = window.innerHeight;
        $(".full-width-band").css('height', pageHeight * .30);
        $(".full-width-band img").css('height', pageHeight * .30);


        $('#section-menu-button').hide();
    }
    if (pageLayout == 'menu') {
        show_animated_menu();

        //resize bands based on page height
        var pageHeight = window.innerHeight;
        $(".menu-header").css('height', pageHeight * .27).css('clear', 'both');
        $(".menu-list").css('height', pageHeight * .27).css('clear', 'both');
        $("#section-menu-button").hide();
    }
    if (pageLayout == 'market') {
        show_bottom_nav();
    }
    if (pageLayout == 'product') {
        show_bottom_nav();
    }
    if (pageLayout == 'mission') {
        show_bottom_nav();

        var baseContent = '<div class="col-sm-5"><h1 id="page-title">&nbsp;</h1><div id="page-content"></div></div>';
        var videoRow = '<div class="col-sm-5 distributor-video-cell">Video</div><div class="col-sm-5 col-sm-offset-1 ceo-video-cell">Video</div>';

        $('#left-column').remove();
        $('#right-column').remove();
        $('.row:first').append(baseContent);
        $('.row.secondary').append(videoRow);

        var distributorContainer = '<div id="distributor-video-container"> <!-- Button trigger modal --> <img id="distributor-video-poster" src="" width="90%" data-toggle="modal" data-target="#distributor-video-modal">  <p class="video-caption" id="distributor-video-caption"></p><!-- Modal --> <div class="modal fade" id="distributor-video-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="distributor-video-modal-body"> <video id="distributor_video" class="video-js vjs-default-skin" controls preload="auto" > <source id="distributor-video-mp4-path" src="" type="video/mp4" /><p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p> </video> </div> </div> </div> </div> </div>';

        var ceoContainer = '<div id="ceo-video-container"> <!-- Button trigger modal --> <img id="ceo-video-poster" src="" width="90%" data-toggle="modal" data-target="#ceo-video-modal"><p class="video-caption" id="ceo-video-caption"></p> <!-- Modal --> <div class="modal fade" id="ceo-video-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="ceo-video-modal-body"> <video id="ceo_video" class="video-js vjs-default-skin" controls preload="auto" > <source id="ceo-video-mp4-path" src="" type="video/mp4" /> <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p> </video> </div> </div> </div> </div> </div>';

        $('.distributor-video-cell').html(distributorContainer);
        $('.ceo-video-cell').html(ceoContainer);
    }
    if (pageLayout == 'text-video') {
        show_bottom_nav();

        var pageSlug = localStorage.getItem('pageSlug');

        $('#left-column').removeClass('col-xs-6').addClass('col-xs-6');
        $('#right-column').removeClass('col-xs-6').addClass('col-xs-5').addClass('"+pageSlug+"-video-cell');
        $('#right-column').html('<div class="' + pageSlug + '-video-cell"></div>');

        var videoContainer = '<div id="' + pageSlug + '-video-container"> <!-- Button trigger modal --> <img width="100%" id="' + pageSlug + '-video-poster" src="" data-toggle="modal" data-target="#' + pageSlug + '-video-modal"> <p class="video-caption" id="' + pageSlug + '-video-caption"></p><!-- Modal --> <div class="modal fade" id="' + pageSlug + '-video-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="' + pageSlug + '-modal-body"> <video id="' + pageSlug + '-video" class="video-js vjs-default-skin" controls preload="auto" > <source id="' + pageSlug + '-video-mp4-path" src="" type="video/mp4" /> <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p> </video> </div> </div> </div> </div> </div>';

        console.log(videoContainer);
        $('.' + pageSlug + '-video-cell').html(videoContainer);

    }
    if (pageLayout == 'text-image') {
        $('#left-column').removeClass('col-xs-6').addClass('col-xs-4 col-lg-5');
        $('#right-column').removeClass('col-xs-6').addClass('col-xs-7 col-lg-6');
        $('#left-column h1').remove();
        var imageContainer = '<img src="" id="left-custom-image" />';
        $('#left-custom-content').html(imageContainer);

        show_bottom_nav();

    }
    if (pageLayout == 'text-only') {
        show_bottom_nav();

    }

    $('body').show();
}

/**
 * Controls the display of the overlay when the intro page is loaded.
 */
function show_animated_overlay() {
    var delayTime = 1000;

    var docHeight = $(document).height();
    var narrowHeight = docHeight * .25;
    var centerHeight = docHeight * .49;
    var docBottom = $(document).height() - narrowHeight;

    var body = $("body");

    body.append("<div id='overlay-top'></div>");
    body.append("<div id='overlay-center'></div>");
    body.append("<div id='overlay-bottom'></div>");

    $("#overlay-top")
        .height(narrowHeight)
        .css({
            'opacity': 1,
            'position': 'absolute',
            'top': 0,
            'left': 0,
            'background-color': '#003a77',
            'width': '100%',
            'z-index': 5000
        });
    $("#overlay-center")
        .height(centerHeight)
        .css({
            'opacity': 1,
            'position': 'absolute',
            'top': narrowHeight,
            'left': 0,
            'background-color': '#003a77',
            'width': '100%',
            'z-index': 5000,
            'margin-top': 5,
            'margin-bottom': 5
        });
    $("#overlay-bottom")
        .height(narrowHeight)
        .css({
            'opacity': 1,
            'position': 'absolute',
            'top': docBottom,
            'left': 0,
            'background-color': '#003a77',
            'width': '100%',
            'z-index': 5000
        });

    $(".fly-in")
        .css({
            'position': 'absolute',
            'top': narrowHeight,
            'left': -3000,
            'width': '100%'
        });

    $('#overlay-center').delay(delayTime).animate({
        left: 3000
    }, 600);
    $('#overlay-top').delay(delayTime).animate({
        left: -3000
    }, 1000);
    $('#overlay-bottom').delay(delayTime).animate({
        left: -3000
    }, 800);

    $('.fly-in').delay(delayTime).animate({
        left: 0
    }, 1500);

}

function show_animated_menu() {
    var delayTime = 500;

    $('.capabilities-row .menu-header').animate({
        left: 0
    }, 1000);

    $('.products-row .menu-header').animate({
        left: 0
    }, 1300);

    $('.markets-row .menu-header').animate({
        left: 0
    }, 1600);

    // Calculate width of header element
    // It is set as a percentage, but we need a px dimension
    var documentWidth = $(document).width();
    var columnWidth = documentWidth / 12;
    var newWidth = columnWidth * 2;

    $('.capabilities-row .menu-list').delay(delayTime).animate({
        left: newWidth
    }, 800);

    $('.products-row .menu-list').delay(delayTime).animate({
        left: newWidth
    }, 1200);

    $('.markets-row .menu-list').delay(delayTime).animate({
        left: newWidth
    }, 1600);


}

function show_bottom_nav() {
    var delayTime = 300;

    var docHeight = $(document).height();
    var linkTop = docHeight - 30;

    $("#footer-menu-link")
        .css({
            'position': 'absolute',
            'top': linkTop + 'px',
            'text-align': 'center',
            'margin': 'auto',
            'height': '30px',
            'width': '100%',
            'z-index': 5000
        });

    // If the bottom nav has not been displayed before
    if (sessionStorage.getItem('displayedBottomNav') != 'true') {
        $('.row').css('opacity', '.9');
        $("#footer-menu-link").animate({
            top: docHeight * .2
        }, 0).css('opacity', '1')
            .delay(delayTime * 5).animate({
                top: linkTop
            }, delayTime);
        $('#footer-menu-link a:first').removeClass('footer-title-up').addClass('footer-title-down');

        setTimeout(function () {
            $('.row').css('opacity', '1');
        }, delayTime * 7);
        $('#footer-menu-link a:first').removeClass('footer-title-down').addClass('footer-title-up');

        // set storage to indicate bottom nav has been displayed
        sessionStorage.setItem('displayedBottomNav', 'true');
    }

    $("#footer-menu-link").on("click", function () {

        var position = $("#footer-menu-link").offset().top;

        if (position == linkTop) {
            $('.row').css('opacity', '.6');
            $("#footer-menu-link").animate({
                top: docHeight * .75
            }, delayTime).css('opacity', '1');

            $('#footer-menu-link a:first').removeClass('footer-title-up').addClass('footer-title-down');
        }
        else {
            $('.row').css('opacity', '1');

            $("#footer-menu-link").animate({
                top: linkTop
            }, delayTime);

            $('#footer-menu-link a:first').removeClass('footer-title-down').addClass('footer-title-up');

        }
    });

}

function show_market_slides() {

    $('#dot-one').addClass('dot-active');

    var one = $('.market-panel').first();
    var two = one.next('.market-panel');
    var three = two.next('.market-panel');

    var width = one.width();
    var offset = one.offset();

    var leftEdge = width - offset.left;

    one.css({
        'opacity': 1,
        'position': 'absolute',
        'top': offset.top,
        'left': offset.left,
        'width': width,
        'z-index': 5000
    });

    two.css({
        'opacity': 1,
        'position': 'absolute',
        'top': offset.top,
        'left': width,
        'width': width,
        'z-index': 5000
    });
    three.css({
        'opacity': 1,
        'position': 'absolute',
        'top': offset.top,
        'left': width * 2,
        'width': width,
        'z-index': 5000
    });

    var sectionHeight = $('.market-panel').innerHeight();

    $('.market-section').css('height', sectionHeight);

    $('.market-panel').on("swipeleft", function () {
        var id = $(this).attr('id');
        if (id != 'three') {
            $('.dot').removeClass('dot-active');
            $('#dot-' + id).addClass('dot-active');
            $('.market-panel').animate({
                left: '-=' + leftEdge
            }, 800);
        }
    });

    $('.market-panel').on("swiperight", function () {

        var id = $(this).attr('id');
        if (id != 'one') {
            $('.dot').removeClass('dot-active');
            $('#dot-' + id).addClass('dot-active');

            $('.market-panel').animate({
                left: '+=' + leftEdge
            }, 800);
        }

    });

    $('.dot').on("click", function () {

        var thisSlide = this.id.split('-')[1];
        $('.dot').removeClass('dot-active');
        $(this).addClass('dot-active');

        if (thisSlide == "one") {
            $('#one').animate({
                left: offset.left
            }, 800);
            $('#two').animate({
                left: width
            }, 800);
            $('#three').animate({
                left: width * 2
            }, 800);
        }
        if (thisSlide == "two") {
            $('#two').animate({
                left: offset.left
            }, 800);
            $('#one').animate({
                left: offset.left - width
            }, 800);
            $('#three').animate({
                left: width
            }, 800);
        }
        if (thisSlide == "three") {
            $('#three').animate({
                left: offset.left
            }, 800);
            $('#two').animate({
                left: offset.left - width
            }, 800);
            $('#one').animate({
                left: offset.left - width * 2
            }, 800);
        }


    });

}

function show_submenu(id) {

    var page = get_page_details(id);
    var parent = get_page_details(page.parent);

    var select = JSON.parse(pagelist);
    var items = select.pages;

    var productDropdown = '<div id="submenu-content" style="display: none;"><ul>';
    var partnerDropdown = '<div id="submenu-content" style="display: none;"><ul>';

    $.each(items, function () {
        if (this.title == page.title && this.parent != 4) {
            productDropdown += '<li><a href="detail.html" onclick="setCookie(\'PAGE_ID\', ' + this.id + ')" data-ajax="false">' + this.headline + '</a></li>';
        }
        else if (this.parent == 12) {
            partnerDropdown += '<li><a href="detail.html" onclick="setCookie(\'PAGE_ID\', ' + this.id + ')" data-ajax="false">' + this.title + '</a></li>';
        }
    });

    productDropdown += '</ul></div>';
    partnerDropdown += '</ul></div>';

    if (page.parent == 4 || parent.parent == 4) {

        $('#submenu').append(productDropdown);
    }
    else if (page.id == 12 || page.parent == 12) {
        $('#submenu').append(partnerDropdown);

    }

    $('#show-menu').on('click', function () {

        if ($('#submenu-content').is(':visible')) {
            $('.row').css('opacity', '1');
            $('#submenu-content').slideToggle();
        }
        else {
            $('.row').css('opacity', '.4');
            $('#submenu-content').slideToggle();

        }
    });

}

function start_inactivity_timer() {

    //Increment the idle time counter every minute.
    var idleInterval = setInterval(timerIncrement, 1000); // 1 second

    //Zero the idle timer on mouse movement.
    $(this).mousemove(function () {
        localStorage.setItem("inactive", "false");
        idleTime = 0;
    });
    $(this).keypress(function () {
        localStorage.setItem("inactive", "false");
        idleTime = 0;
    });
    $(this).on("tap", function () {
        localStorage.setItem("inactive", "false");
        idleTime = 0;
    })
}

/** UTILITY FUNCTIONS */

function getParameterByName(name) {
    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
        results = regex.exec(location.search);
    return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
}

function getObjects(obj, key, val) {
    var objects = [];
    for (var i in obj) {
        if (!obj.hasOwnProperty(i)) continue;
        if (typeof obj[i] == 'object') {
            objects = objects.concat(getObjects(obj[i], key, val));
        } else if (i == key && obj[key] == val) {
            objects.push(obj);
        }
    }
    return objects;
}

function timerIncrement() {

    var thisPage = get_container_id();
    var inactive = getParameterByName('inactive');
    idleTime = idleTime + 1;
    console.log("Idletime: " + idleTime);

    if (thisPage == '1' && idleTime > 2 && !videoWasOpenedAtPageLoad) {
        if (localStorage.inactive == 'true') {
            $('#video-modal-link').click();
            idleTime = 0;
            videoWasOpenedAtPageLoad = true;
        }
    }
    if (idleTime > 180) { // 3 minutes
        if (thisPage != '1') {
            var home = fileDepth + 'pages/index.html?pageId=1';
            localStorage.setItem("inactive", "true");
            window.location.href = home;
        }
        else {
            $('#video-modal-link').click();
            localStorage.setItem("inactive", "true");
            idleTime = 0;
        }
    }
}

function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
    var expires = "expires=" + d.toUTCString();
    sessionStorage.setItem(cname, cvalue);
    document.cookie = cname + "=" + cvalue + "; " + expires + "; path=/presentation";
}

function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length, c.length);
    }
    return "";
}

/** DEBUG FUNCTIONS */

/**
 This function will be replaced by app-driven functionality to select available presentations
 */
function get_available_presentations() {

    var presentations = '[{ "id": "1", "company":"Bulls" },' +
        '{ "id":2, "company":"Blackhawks"}' +
        ']';

    var livepresentations = JSON.parse(presentations);
    $.each(livepresentations, function () {
        var html = '<a href="pages/index.html?pageId=1" class="ui-btn" id="view-content-button" data-ajax="false">' + this.company + '</a>';
        $('#presentations-list').append(html);

    });

}

/** LEGACY FUNCTIONS - no longer in user */


//function get_video_settings() {
//
//    var livevideos = JSON.parse(videoList);
//    $.each(livevideos, function () {
//        var path = menuDepth + 'Content/videos';
//        if (this.custom == true) {
//            path = menuDepth + 'Content/pres' + presID + '/videos';
//        }
//        var html = '<li>' + this.title + ' - ' + path + '/' + this.filename + '</li>';
//        $('#video-list').append(html);
//    });
//
//    return livevideos;
//
//}
